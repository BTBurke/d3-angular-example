(function(){"use strict";var a;a=angular.module("d3testApp",["d3testApp.controllers","d3testApp.directives"]),a.config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict",angular.module("d3testApp.controllers",[]).controller("MainCtrl",["$scope",function(a){var b,c;return b=function(){return Math.round(Math.random()*25)},c=function(){return(new Date).getTime()},a.dataLength=8,a.data=[{time:c(),data:b()}],a.updateData=function(){a.data.push({time:c(),data:b()});if(a.data.length>a.dataLength)return a.data.shift()}}])}.call(this),function(){"use strict";var a,b,c,d;angular.module("d3testApp.directives",[]).directive("scVisualization",[function(){return{restrict:"E",scope:{val:"="},link:function(b,d,e){return a(b,d),b.$watch("val",c,!0)}}}]),a=function(a,b){a.w=400,a.h=200;if(a.svg==null)return a.svg=d3.select(b[0]).append("svg").attr("width",a.w).attr("height",a.h)},c=function(a,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;e.xScale=d3.scale.ordinal().domain(d3.range(a.length)).rangeRoundBands([0,e.w],.05),e.yScale=d3.scale.linear().domain([0,d3.max(a,function(a){return a.data})]).range([0,e.h]),g=e.svg.selectAll("rect").data(a,function(a){return a.time}),h=g.transition().duration(200).ease("cubic-out"),j=g.enter().append("rect").transition().delay(100).duration(0).ease("cubic-out").attr("x",(a.length+2)*e.xScale.rangeBand()),g.exit().transition().duration(200).ease("cubic-out").attr("x",-e.xScale.rangeBand()).remove(),r=[h,j];for(n=0,p=r.length;n<p;n++)f=r[n],b(f,e);l=e.svg.selectAll("text").data(a,function(a){return a.time}),m=l.transition().duration(200).ease("cubic-out"),k=l.enter().append("text").transition().delay(100).duration(0).ease("cubic-out").attr("x",(a.length+2)*e.xScale.rangeBand()),l.exit().transition().attr("x",-e.xScale.rangeBand()).remove(),s=[m,k],t=[];for(o=0,q=s.length;o<q;o++)i=s[o],t.push(d(i,e));return t},b=function(a,b){return a.attr("x",function(a,c){return b.xScale(c)}).attr("y",function(a){return b.h-b.yScale(a.data)}).attr("width",b.xScale.rangeBand()).attr("height",function(a){return b.yScale(a.data)}).attr("fill",function(a){return"rgb(0, 0, "+a.data*10+")"})},d=function(a,b){return a.text(function(a){return a.data}).attr("x",function(a,c){return b.xScale(c)+b.xScale.rangeBand()/2}).attr("y",function(a){return b.h-b.yScale(a.data)+15}).attr("text-anchor","middle").attr("font-family","sans-serif").attr("font-size","8px").attr("fill","white")}}.call(this);